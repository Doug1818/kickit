<h2>Pre-start Checklist</h2>
<h4 style="margin:0">Your 3-week program starts on <%= current_user.next_program.start_date.strftime("%A, %B %d") %></h4>
<br>

<h3 style="margin-bottom:5px">Required</h3>
<ul data-role="listview" data-inset="true">
  <% if current_user.next_program.supporters.any? %>
    <li data-icon="false">
      <a href=<%= supporters_path %> data-ajax="false" style="font-weight: bold;">
      <img src="/assets/checklist_checked.png" class="ui-li-icon ui-corner-none">
      <%= "Add Supporters (#{current_user.next_program.supporters.count} added)" %></a>
    </li>
  <% else %>
    <li data-icon="false">
      <a href=<%= supporters_path %> data-ajax="false" style="font-weight: bold;">
      <img src="/assets/checklist_unchecked.png" class="ui-li-icon ui-corner-none">
      <%= "Add Supporters (#{current_user.next_program.supporters.count} added)" %></a>
    </li>
  <% end %>
  <% if current_user.stripe_customer_id? %>
    <li data-icon="false">
      <a href=<%= billing_user_path(current_user) %> data-ajax="false" style="font-weight: bold;">
      <img src="/assets/checklist_checked.png" class="ui-li-icon ui-corner-none">Add Billing Info</a>
    </li>
  <% else %>
    <li data-icon="false">
      <a href=<%= billing_user_path(current_user) %> data-ajax="false" style="font-weight: bold;">
      <img src="/assets/checklist_unchecked.png" class="ui-li-icon ui-corner-none">Add Billing Info</a>
    </li>
  <% end %>
</ul>
<h3 style="margin-top:20px;margin-bottom:5px">Optional</h3>

<ul data-role="listview" data-inset="true">
  <% current_user.next_program.user_todos.order("id asc").each do |user_todo| %>
    <% if user_todo.completed == true %>
      <li data-icon="false">
        <a href=<%= complete_user_todo_path(user_todo) %> data-method="put">
        <img src="/assets/checklist_checked.png" class="ui-li-icon ui-corner-none"><%= user_todo.name %></a>
      </li>
    <% else %>
      <li data-icon="false">
        <a href=<%= complete_user_todo_path(user_todo) %> data-method="put">
        <img src="/assets/checklist_unchecked.png" class="ui-li-icon ui-corner-none"><%= user_todo.name %></a>
      </li>
    <% end %>
  <% end %>
</ul>

<style type="text/css">
.ui-icon-myapp-email {
  background-image: url("app-icon-email.png");
}

.ui-listview .ui-btn-text .ui-link-inherit {
    white-space : normal !important;
    font-weight: normal;
}

.ui-listview .ui-btn-text .ui-link-inherit img {
   position: absolute;
   top: 50%;
   left: 5px;
   margin-top: -9px; /* image height/2 */
   margin-left: 7px;
}

.ui-btn-text {
  white-space: normal;
}

.checklist .ui-btn {
  text-align: left
}

.ui-icon-checked {
  background: url("/assets/checklist_checked.png");
}
.ui-icon-unchecked {
  background: url("/assets/checklist_unchecked.png");
}
</style>