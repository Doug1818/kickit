<!DOCTYPE html>
<html>
	<head>
		<%= yield :title %>
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <%= stylesheet_link_tag "http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css", "mobile" %>
	    <%= javascript_include_tag "http://code.jquery.com/jquery-1.9.1.min.js", "http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js", "application" %>
	    <%= csrf_meta_tags %>
	  	<%= render 'layouts/shim' %>
	  	<%= favicon_link_tag 'apple-touch-icon.png', :rel => 'apple-touch-icon', :type => 'image/png' %>
	</head>
	<body>
	    <div data-role="page">

	    	<div data-role="panel" id="mypanel" data-position="right" data-theme="a">
	    		<div data-role="controlgroup">
	    		<%= link_to 'Home', root_path, "data-role" => "button" %>
	    		<%= link_to 'Profile', edit_user_registration_path, "data-role" => "button" %>
	    		<%= link_to 'Reminders', reminders_path, "data-role" => "button" %>
	    		<%= link_to 'Tracking', root_path, "data-role" => "button" %>
    			</div>
    			<%= link_to 'Sign out', destroy_user_session_path, method: "delete", "data-role" => "button" %>
			</div>

	        <div data-role="header">
	            <%= link_to 'Home', root_path, "data-icon" => "home", "data-iconpos" => "notext", class: "ui-icon-alt",
	            	"data-role" => "button", "data-theme" => "c", "data-inline" => "true", "data-ajax" => "false" %>
	            <%= yield :h1 %>
	            <% if user_signed_in? && current_user.start_date? %>
		          <a href="#mypanel" data-icon="bars" data-iconpos="notext" data-theme="c" class="ui-icon-alt">Options</a>
	          	<% elsif user_signed_in? && !current_user.start_date? %>
	          		<%= link_to 'Sign out', destroy_user_session_path, method: "delete", "data-role" => "button", "data-theme" => "c", "data-inline" => "true" %>
	            <% else %>
            		<%= link_to 'Sign in', new_user_session_path, "data-role" => "button", "data-theme" => "c", "data-inline" => "true" %>
            	<% end %>  
	        </div>
	 
	        <div data-role="content">
	        	<div>
					<% flash.each do |key, value| %>
						<div class="test test-#{key}">
							<%= content_tag(:div, value) %>
						</div>
					<% end %>
					
					<%= yield %>

					<%= debug(params) if Rails.env.development? %>
				</div>
	        </div>
	 
	        <!--<div data-role="footer">
	            <h4>My Footer</h4>
	        </div>-->
	 
	    </div>
	</body>
</html>

<style type="text/css">
.test {
padding: 8px 35px 8px 14px;
margin-bottom: 18px;
color: #c09853;
text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
background-color: #fcf8e3;
border: 1px solid #fbeed5;
border-radius: 4px;
}
.test-heading {
color: inherit;
}
.test .close {
position: relative;
top: -2px;
right: -21px;
line-height: 18px;
}

.test-success {
color: #468847;
background-color: #dff0d8;
border-color: #d6e9c6;
}

.test-danger,
.test-error {
color: #b94a48;
background-color: #f2dede;
border-color: #eed3d7;
}

.test-info {
color: #3a87ad;
background-color: #d9edf7;
border-color: #bce8f1;
}
</style>